<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rasterise population counts within census block polygons — rasterise_pop • home2park</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Rasterise population counts within census block polygons — rasterise_pop" />
<meta property="og:description" content="Convert population counts per census block (polygons)
into population density grid (raster) for subsequent analyses.
Each polygon's count is divided by its area, such that the the integrated
density over each census block should equal the original count.
Census data for multiple years can be processed (one raster per year).
The column name for the year must be specified, even if data does not contain multiple years
(combined data across multiple years must be in the 'long' format)." />
<meta property="og:image" content="https://ecological-cities.github.io/home2park/reference/figures/logo.png" />
<meta property="og:image:alt" content="Spatial Provision of Urban Parks" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@song_xiaoping" />
<meta name="twitter:site" content="https://xp-song.github.io" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">home2park</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/home2park.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/online/metric-comparisons.html">Park area provision: Metric comparisons</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ecological-cities/home2park/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rasterise population counts within census block polygons</h1>
    <small class="dont-index">Source: <a href='https://github.com/ecological-cities/home2park/blob/master/R/rasterise_pop.R'><code>R/rasterise_pop.R</code></a></small>
    <div class="hidden name"><code>rasterise_pop.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Convert population counts per census block (polygons)
into population density grid (raster) for subsequent analyses.
Each polygon's count is divided by its area, such that the the integrated
density over each census block should equal the original count.
Census data for multiple years can be processed (one raster per year).
The column name for the <code>year</code> must be specified, even if data does not contain multiple years
(combined data across multiple years must be in the 'long' format).</p>
    </div>

    <pre class="usage"><span class='fu'>rasterise_pop</span><span class='op'>(</span>
  <span class='va'>sf</span>,
  res <span class='op'>=</span> <span class='fl'>10</span>,
  census_block <span class='op'>=</span> <span class='cn'>NULL</span>,
  pop_count <span class='op'>=</span> <span class='cn'>NULL</span>,
  year <span class='op'>=</span> <span class='st'>"year"</span>,
  dir_processing <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>sf</th>
      <td><p><code>sf</code>polygons containing the population census data.
Data should be in a projected coordinate reference system (for calculation of pixel resolution).</p></td>
    </tr>
    <tr>
      <th>res</th>
      <td><p>number. Specify the pixel resolution for rasterisation (in metres). Defaults to <code>10</code>.</p></td>
    </tr>
    <tr>
      <th>census_block</th>
      <td><p>character. Specify column name of the census block unique identifier (e.g. name).</p></td>
    </tr>
    <tr>
      <th>pop_count</th>
      <td><p>character. Specify column name of the population counts per census block.</p></td>
    </tr>
    <tr>
      <th>year</th>
      <td><p>character. Specify column name of the census year. Defaults to <code>'year'</code>.</p></td>
    </tr>
    <tr>
      <th>dir_processing</th>
      <td><p>character. Directory to store intermediate files. Defaults to <code><a href='https://rdrr.io/r/base/tempfile.html'>tempdir()</a></code>.
Set to <code>NULL</code> if you do not wish to export intermediate (temporary) files for subsequent processing.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List containing (1) rasterised population count per census block,
(2) rasterised population density per census block, and (3) processed polygons used to generate
these rasters. Named <code>pop_count_rasters</code>, <code>pop_density_rasters</code> and <code>pop_polygons</code>, respectively. List is nested if multiple years are present (one sub-list for each census year).
Zero values for population counts/density are converted to <code>NA</code>. Intermediate (raster) files are exported to <code><a href='https://rdrr.io/r/base/tempfile.html'>tempdir()</a></code> for further processing.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pop_sgp</span><span class='op'>)</span>


<span class='co'># transform to projected crs</span>
<span class='va'>pop_sgp</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='va'>pop_sgp</span>, <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_crs.html'>st_crs</a></span><span class='op'>(</span><span class='fl'>32648</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># run function</span>
<span class='va'>pop_rasters</span> <span class='op'>&lt;-</span> <span class='fu'>rasterise_pop</span><span class='op'>(</span><span class='va'>pop_sgp</span>,
                             res <span class='op'>=</span> <span class='fl'>10</span>,
                             census_block <span class='op'>=</span> <span class='st'>"subzone_n"</span>,
                             pop_count <span class='op'>=</span> <span class='st'>"pop_count"</span>,
                             year <span class='op'>=</span> <span class='st'>"year"</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://xp-song.github.io'>Xiao Ping Song</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


